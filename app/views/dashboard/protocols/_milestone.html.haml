.panel.panel-default
  .panel-heading
    %h4.panel-title
      = t(:dashboard)[:protocols][:milestones][:title]
  .panel-body
    .date-details
      = form_for(protocol, url: dashboard_protocol_milestones_path(protocol), method: :patch, remote: true) do |f|
        .form-group.col-lg-12
          = f.label :start_date,
            t('dashboard.protocols.milestones.start_date', type: protocol.type),
            class: 'col-lg-2 control-label required',
            data: { toggle: 'tooltip', placement: 'right', delay: '{"show":"500"}' },
            title: t('dashboard.protocols.milestones.tooltips.start_date', type: protocol.type)
          .col-lg-10
            = text_field_tag 'start_date', nil,
              class: 'datetimepicker form-control start-date-picker',
              value: (protocol.start_date.strftime('%_m/%d/%Y') rescue nil)
            = f.hidden_field :start_date, class: 'start-date-setter'
        .form-group.col-lg-12
          = f.label :end_date,
            t('dashboard.protocols.milestones.end_date', type: protocol.type),
            class: 'col-lg-2 control-label required',
            data: { toggle: 'tooltip', placement: 'right', delay: '{"show":"500"}' },
            title: t('dashboard.protocols.milestones.tooltips.end_date', type: protocol.type)
          .col-lg-10
            = text_field_tag 'end_date', nil,
              class: 'datetimepicker form-control end-date-picker',
              value: (protocol.end_date.strftime('%_m/%d/%Y') rescue nil)
            = f.hidden_field :end_date, class: 'end-date-setter'

        - if protocol.has_clinical_services?
          .form-group.col-lg-12#recruitment-start
            = f.label :recruitment_start_date,
              t('dashboard.protocols.milestones.recruitment_start', type: protocol.type),
              class: 'col-lg-2 control-label',
              data: { toggle: 'tooltip', placement: 'right', delay: '{"show":"500"}' },
              title: t('dashboard.protocols.milestones.tooltips.recruitment_start_date', type: protocol.type)
            .col-lg-10
              = text_field_tag 'recruitment_start_date', nil,
                class: 'datetimepicker form-control recruitment-start-date-picker',
                value: (protocol.recruitment_start_date.strftime('%_m/%d/%Y') rescue nil)
              = f.hidden_field :recruitment_start_date, value: nil, class: 'recruitment-start-date-setter'
          .form-group.col-lg-12#recruitment-end
            = f.label :recruitment_end_date,
              t('dashboard.protocols.milestones.recruitment_end', type: protocol.type),
              class: 'col-lg-2 control-label',
              data: { toggle: 'tooltip', placement: 'right', delay: '{"show":"500"}' },
              title: t('dashboard.protocols.milestones.tooltips.recruitment_end_date', type: protocol.type)
            .col-lg-10
              = text_field_tag 'recruitment_end_date', nil,
                class: 'datetimepicker form-control recruitment-end-date-picker',
                value: (protocol.recruitment_end_date.strftime('%_m/%d/%Y') rescue nil)
              = f.hidden_field :recruitment_end_date, value: nil,
                class: 'recruitment-end-date-setter'
        .form-group
          .col-sm-offset-3.col-sm-6
            = f.submit t('dashboard.protocols.milestones.update_button'), class: 'btn btn-primary btn-block'
